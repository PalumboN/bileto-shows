<div class="container">
  <div class="page-header">
    <h1>
      Shows
    </h1>

    <button class="btn btn-primary" type="button" data-ng-click="ctrl.sync()" data-ng-disabled="ctrl.syncing">Refresh</button>
    <i class="fa fa-spinner fa-pulse fa-2x fa-fw" data-ng-show="ctrl.syncing"></i>
    <span class="sr-only" data-ng-show="ctrl.syncing">Loading...</span>
    
  </div>

  <div class="panel panel-default" data-ng-repeat="show in ctrl.shows">
    <div class="container-fluid panel-heading">
      <h3 class="panel-title col col-md-4">{{show.description}} </h3>
      <span class="col col-md-7 text-right" am-time-ago="show.lastUpdate"></span>
      <a href="" class="col col-md-1 text-right" data-ng-click="ctrl.archive(show)"><i class="fa fa-trash fa-lg text-danger" aria-hidden="true"></i></a>
    </div>
    <div ng-if="show.site == 'ticketek'" class="panel-body" data-ng-repeat="performance in show.model">
      <p>{{show.place}} - {{performance.date}}</p>
      <table class="table table-hover" data-ng-repeat="section in performance.sections">
        <tr class="active">
          <td class="col col-md-6">{{section.description}} (${{section.full_price}})</td>
          <td class="col col-md-6 text-right"><strong>{{section.section_availability}}</strong></td>
        </tr>
      </table>
    </div>
    <div ng-if="show.site == 'ticketportal'" class="panel-body" data-ng-repeat="performance in show.model.performances">
      <p>{{performance}}</p>
    </div>
  </div>

</div>

<hr>

<div class="container">
  <i class="fa fa-plus-circle" aria-hidden="true"></i>
  <a data-toggle="collapse" href="#collapseArchived" aria-expanded="false" data-ng-click="ctrl.loadArchived()">Ver archivados</a>
  <div class="collapse" id="collapseArchived">
    <div class="panel panel-default" data-ng-repeat="show in ctrl.archivedShows">
      <div class="container-fluid panel-heading">
        <h3 class="panel-title col col-md-4">{{show.description}}</h3>
        <a href="" class="col col-md-8 text-right" data-ng-click="ctrl.reactive(show)">Reactivar</a>
      </div>
      <div class="panel-body" data-ng-repeat="performance in show.model">
        <p>{{performance.author}} - {{performance.date}}</p>
        <table class="table table-hover" data-ng-repeat="section in performance.sections">
          <tr class="active">
            <td class="col col-md-6">{{section.description}} (${{section.full_price}})</td>
            <td class="col col-md-6 text-right"><strong>{{section.section_availability}}</strong></td>
          </tr>
        </table>
      </div>
    </div>
  </div>
</div>
